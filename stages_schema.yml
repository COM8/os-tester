"$ref": "#/definitions/Root"
definitions:
    Root:
        type: object
        additionalProperties: false
        properties:
            stages:
                type: array
                items:
                    "$ref": "#/definitions/Stage"
        required:
            - stage
    Stage:
        type: object
        additionalProperties: false
        properties:
            stage:
                type: string
            timeout_s:
                type: integer
            paths:
                type: array
                items:
                    "$ref": "#/definitions/Path"
        required:
            - stage
            - timeout_s
            - paths
        title: stage
    Path:
        type: object
        additionalProperties: false
        properties:
            checks:
                type: array
                items:
                    "$ref": "#/definitions/File"
            actions:
                type: array
                items:
                    "$ref": "#/definitions/Action"
            nextStage:
                type: string
        required:
            - checks
            - actions
            - nextStage
        title: path
    Action:
        type: object
        additionalProperties: false
        properties:
            keyboard_key:
                "$ref": "#/definitions/Keyboard"
            keyboard_text:
                "$ref": "#/definitions/KeyboardText"
            mouse_move:
                "$ref": "#/definitions/MouseMove"
            mouse_click:
                "$ref": "#/definitions/MouseClick"
            sleep:
                "$ref": "#/definitions/Sleep"
            reboot:
                type: null
                description: "Requests the VM to reboot. Note the VM can ignore this request."
            shutdown:
                type: null
                description: "Requests the VM to shutdown. Note the VM can ignore this request."
        title: action
    Sleep:
        type: object
        additionalProperties: false
        properties:
            duration_s:
                type: number
                description: "The time in seconds to sleep before continuing."
        required:
            - value
            - duration_s
        title: keyboard_key
    KeyboardKey:
        type: object
        additionalProperties: false
        properties:
            value:
                type: string
            duration_s:
                type: number
                description: "The pause in seconds after each action. <key_down> <pause for duration_s> <key_up> <pause for duration_s>"
        required:
            - value
            - duration_s
        title: keyboard_key
    KeyboardText:
        type: object
        additionalProperties: false
        properties:
            value:
                type: string
                description: "The key presses to send send."
            duration_s:
                type: number
                description: "The pause in seconds after each action. <key1_down> <pause for duration_s> <key1_up> <pause for duration_s> <key2_down> <pause for duration_s> <key2_up> <pause for duration_s>..."
        required:
            - value
            - duration_s
    MouseMove:
        type: object
        additionalProperties: false
        properties:
            x_rel:
                type: number
            y_rel:
                type: number
            duration_s:
                type: number
        required:
            - x_rel
            - y_rel
            - duration_s
        title: mouse_move
    MouseClick:
        type: object
        additionalProperties: false
        properties:
            value:
                type: string
            duration_s:
                type: number
        required:
            - value
            - duration_s
        title: mouse_click
    File:
        type: object
        additionalProperties: false
        description: "Describes a file source for a reference image used during comparison."
        properties:
            path:
                type: string
                description: "Path to the reference image used for comparison."
            ssim_geq:
                type: number
                description: "Minimum structural similarity index (https://scikit-image.org/docs/0.25.x/auto_examples/transform/plot_ssim.html) required, in the range [0.0, 1.0]."
            area:
                "$ref": "#/definitions/Area"
                description: "Optional sub-rectangle to compare against the same-sized area in the captured OS image."
        required:
            - file
            - ssim_geq
        title: file
    Area:
        type: object
        additionalProperties: false
        description: "Rectangle defined by X/Y coordinates as percentages of the full image."
        properties:
            x1Percentage:
                type: number
                description: "Left X coordinate of the comparison area, as a percentage in [0.0, 1.0]."
            x2Percentage:
                type: number
                description: "Right X coordinate of the comparison area, as a percentage in [0.0, 1.0]."
            y1Percentage:
                type: number
                description: "Top Y coordinate of the comparison area, as a percentage in [0.0, 1.0]."
            y2Percentage:
                type: number
                description: "Bottom Y coordinate of the comparison area, as a percentage in [0.0, 1.0]."
